<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test web components</title>
  <script defer>
    loadScript = url => new Promise((res, rej) => {
      const s = document.createElement('script');
      s.onload = res;
      s.onerror = rej;
      s.src = url;
      document.head.appendChild(s);
    });
    supportsCustomElements = () => new Promise((res, rej) => {
      if (window.customElements) {
        res();
      } else {
        rej();
      }
    });
  </script>
  <script defer>
    loadScript(`//${location.hostname}:35729/livereload.js?snipver=1`);
  </script>
  <script defer>
    supportsCustomElements()
      // if doesn't support, add polyfill
      .catch(() => loadScript(
        '/node_modules/skatejs-web-components/dist/index-with-deps.js'
      ))
      .then(() => loadScript('/node_modules/data-loader/dist/index.js'))
      .then(() => loadScript('/dist/index.js'));
  </script>
  <style>
    interpro-entry .link{
      font-size: 2em;
    }
    body{
      line-height: 2;
    }
  </style>
</head>
<body>
  <h1>Interpro Type</h1>
  <div>
    <div>
      Small, hardcoded:
      <interpro-type type="family"></interpro-type>
      <interpro-type type="domain"></interpro-type>
      <interpro-type type="repeat"></interpro-type>
      <interpro-type type="site"></interpro-type>
      <interpro-type type="active site"></interpro-type>
      <interpro-type type="binding site"></interpro-type>
      <interpro-type type="conserved site"></interpro-type>
      <interpro-type type="ptm"></interpro-type>
      <interpro-type type="undefined"></interpro-type>
    </div>
    <div>
      Expanded, hardcoded:
      <interpro-type type="family" expanded></interpro-type>
      <interpro-type type="domain" expanded></interpro-type>
      <interpro-type type="repeat" expanded></interpro-type>
      <interpro-type type="site" expanded></interpro-type>
      <interpro-type type="active site" expanded></interpro-type>
      <interpro-type type="binding site" expanded></interpro-type>
      <interpro-type type="conserved site" expanded></interpro-type>
      <interpro-type type="ptm" expanded></interpro-type>
      <interpro-type type="undefined" expanded></interpro-type>
    </div>
    <div>
      Small, from network:
      <interpro-type>
        <data-loader>
          <source
              src="http://hmmer-prod-db03:8000/api/entry/interpro/IPR011528"
          >
        </data-loader>
      </interpro-type>
    </div>
    <div>
      Expanded, from network:
      <interpro-type expanded>
        <data-loader>
          <source
              src="http://hmmer-prod-db03:8000/api/entry/interpro/IPR011528"
          >
        </data-loader>
      </interpro-type>
    </div>
  </div>
  <h1>Interpro Entry</h1>
  <ul>
    <li>
      Single entry:
      <interpro-entry accession="IPR020405" type="family" name="Atypical dual specificity phosphatase, subfamily A"></interpro-entry>
    </li>
    <li>
      Single entry (selected):
      <interpro-entry accession="IPR020405" type="family" name="Atypical dual specificity phosphatase, subfamily A" selected></interpro-entry>
    </li>
    <li>
      Simple hierarchy:<br/>
      <interpro-entry accession="IPR024950" type="family" name="Dual specificity phosphatase">
        <interpro-entry accession="IPR020417" type="family" name="Atypical dual specificity phosphatase">
          <interpro-entry accession="IPR020405" type="family" name="Atypical dual specificity phosphatase, subfamily A"></interpro-entry>
        </interpro-entry>
      </interpro-entry>
    </li>
    <li>
      Simple hierarchy:<br/>
      <interpro-entry accession="IPR024950" type="family" name="Dual specificity phosphatase" href="http://www.ebi.ac.uk/interpro/entry/IPR024950" >
        <interpro-entry accession="IPR020417" type="family" name="Atypical dual specificity phosphatase" selected>
          <interpro-entry accession="IPR020405" type="family" name="Atypical dual specificity phosphatase, subfamily A"></interpro-entry>
          <interpro-entry accession="IPR020405" type="family" name="Atypical dual specificity phosphatase, subfamily A"></interpro-entry>        </interpro-entry>
        <interpro-entry accession="IPR020417" type="family" name="Atypical dual specificity phosphatase" level="2">
          <interpro-entry accession="IPR020405" type="family" name="Atypical dual specificity phosphatase, subfamily A"></interpro-entry>
          <interpro-entry accession="IPR020405" type="family" name="Atypical dual specificity phosphatase, subfamily B">
            <interpro-entry accession="IPR020405" type="family" name="Atypical dual specificity phosphatase, subfamily C"></interpro-entry>
          </interpro-entry>
        </interpro-entry>
      </interpro-entry>
    </li>
    <li>
      Simple from network:
      <interpro-entry>
        <data-loader>
          <source src="http://hmmer-prod-db03:8000/api/entry/interpro/IPR011528">
        </data-loader>
      </interpro-entry>
    </li>
    <li>
      Simple from network (Selected):
      <interpro-entry selected>
        <data-loader>
          <source src="http://hmmer-prod-db03:8000/api/entry/interpro/IPR011520">
        </data-loader>
      </interpro-entry>
    </li>
  </ul>
  <h1>Interpro Hierarchy</h1>
  <ul>
    <li>From network<br/>
      <interpro-hierarchy accession="IPR000001">
        <data-loader selector="metadata.hierarchy">
          <source src="http://localhost:8007/api/entry/interpro/IPR000001">
        </data-loader>
      </interpro-hierarchy>
    </li>
    <li>From network - pruned<br/>
      <interpro-hierarchy accession="IPR003074" displaymode="pruned">
        <data-loader selector="metadata.hierarchy">
          <source src="http://localhost:8007/api/entry/interpro/IPR003074">
        </data-loader>
      </interpro-hierarchy>
    </li>
    <li>From network - showing up to 2 children<br/>
      <interpro-hierarchy accession="IPR024178" hideafter="2">
        <data-loader selector="metadata.hierarchy">
          <source src="http://localhost:8007/api/entry/interpro/IPR024178">
        </data-loader>
      </interpro-hierarchy>
    </li>
    <li>From dataloader json<br/>
      <interpro-hierarchy>
        <data-loader>
          <script type="application/json">
            {"accession":"IPR024178","name":"Oestrogen receptor/oestrogen-related receptor", "type":"Family", "children":[{"accession":"IPR001292","name":"Oestrogen receptor","type":"Family"}, {"accession":"IPR028355","name":"Estrogen receptor beta/gamma","type":"Family"}, {"accession":"IPR027289","name":"Oestrogen-related receptor","type":"Family"}]}
          </script>
        </data-loader>
      </interpro-hierarchy>
    </li>
  </ul>
</body>
</html>
